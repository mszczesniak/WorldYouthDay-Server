DROP TABLE EVENT_LOCATION;
DROP TABLE EVENT_DETAILS;
DROP TABLE EVENT;

CREATE TABLE EVENT
(
    id VARCHAR(128) PRIMARY KEY NOT NULL,
    start_date TIMESTAMP NOT NULL,
    end_date TIMESTAMP NOT NULL,
    city_id VARCHAR(128) REFERENCES CITY(id),
    version NUMERIC NOT NULL
);

CREATE TABLE EVENT_LOCATION
(
  ID_EVENT VARCHAR(128)  NOT NULL,
  ID_LOCATION VARCHAR(128) NOT NULL,
  PRIMARY KEY (ID_EVENT, ID_LOCATION),
  FOREIGN KEY (ID_EVENT) REFERENCES EVENT (id),
  FOREIGN KEY (ID_LOCATION) REFERENCES POINTS_OF_INTEREST (id_poi)
);

CREATE TABLE EVENT_DETAILS
(
    event_id VARCHAR(128) REFERENCES EVENT(id),
    language VARCHAR(20) NOT NULL,
    title VARCHAR(128) NOT NULL,
    description  TEXT NOT NULL,
    version NUMERIC NOT NULL,
    PRIMARY KEY (event_id, language)
);

INSERT INTO EVENT(id,start_date,end_date,city_id,version) VALUES ('1d996c1c-0d76-11e6-a148-3e1d05defe78',(TIMESTAMP '2016-08-07 22:10:00'),(TIMESTAMP '2016-08-07 23:10:00'),'1',0);
INSERT INTO EVENT_LOCATION(ID_EVENT,ID_LOCATION) VALUES ('1d996c1c-0d76-11e6-a148-3e1d05defe78','b9288672-14d9-42cc-a855-f4f9f4d75ce2');
INSERT INTO EVENT_DETAILS (event_id, language, title, description, version) VALUES ('1d996c1c-0d76-11e6-a148-3e1d05defe78','ENGLISH','Koncert EN','Koncert zespolu combo lombo EN',0);
INSERT INTO EVENT_DETAILS (event_id, language, title, description, version) VALUES ('1d996c1c-0d76-11e6-a148-3e1d05defe78','POLISH','Koncert','Koncert zespolu combo lombo',0);